# AI Studio Proxy API Configuration Template
# 复制此文件为 .env 并根据需要修改配置
# Copy this file to .env and modify as needed

# =============================================================================
# 1. 服务端口配置 (Server Port Configuration)
# =============================================================================

# FastAPI 主服务端口
# The port where the main OpenAI-compatible API will listen.
PORT=2048

# GUI 启动器默认端口配置 (Launcher Defaults)
# 这些值仅用于启动器显示的默认建议，实际运行端口由上面的 PORT 决定。
DEFAULT_FASTAPI_PORT=2048
DEFAULT_CAMOUFOX_PORT=9222

# =============================================================================
# 2. 认证配置 (Authentication Configuration)
# =============================================================================

# 自动保存认证信息 (Auto Save Auth)
# 设置为 true 以在成功登录后自动保存认证状态 (cookies/localStorage)，无需人工确认。
# [IMPORTANT] 必须在 debug 模式下设置为 true 才能保存新的认证配置文件！
# Headless 模式使用已保存的配置文件，不需要此设置。
# Default: false
AUTO_SAVE_AUTH=false

# 认证保存超时时间 (seconds)
# 在 debug 模式下等待用户输入保存文件名的超时时间。超时后将使用默认文件名。
# Default: 30
AUTH_SAVE_TIMEOUT=30

# =============================================================================
# 3. 浏览与启动配置 (Browser & Model Configuration)
# =============================================================================

# 启动模式 (Launch Mode)
# 选项 (Options):
# - normal: 标准模式，同 debug。
# - debug: 显示浏览器窗口，允许交互。适合初次设置和调试。
# - headless: 无头模式，无浏览器窗口。适合服务器部署。需先保存认证文件。
# - virtual_display: (仅 Linux) 使用 Xvfb 虚拟显示。比纯 headless 更稳定被识别。
# - direct_debug_no_browser: 不启动浏览器，仅用于调试 API 逻辑。
LAUNCH_MODE=normal

# Camoufox WebSocket 端点 (仅高级用户)
# 如果您想连接到现有的外部 Camoufox/Chrome 实例。
# CAMOUFOX_WS_ENDPOINT=ws://127.0.0.1:9222

# 快速启动 (Direct Launch)
# 设置为 true 跳过启动器的交互式选择菜单，直接使用 .env 配置启动。
DIRECT_LAUNCH=false

# 仅收集当前用户消息中的附件
# 设置为 true 则只处理当前请求中的附件，忽略历史消息中的附件（节省带宽）。
ONLY_COLLECT_CURRENT_USER_ATTACHMENTS=false

# =============================================================================
# 4. 代理配置 (Proxy Configuration)
# =============================================================================

# 统一代理配置 (Unified Proxy)
# 推荐使用此设置。它会同时配置 HTTP_PROXY, HTTPS_PROXY 以及浏览器内部代理。
# 支持 http:// 和 socks5:// 协议。
UNIFIED_PROXY_CONFIG=http://127.0.0.1:7890

# 传统代理设置 (Legacy Proxy Settings)
# 仅在未设置 UNIFIED_PROXY_CONFIG 时生效。
# HTTP_PROXY=http://127.0.0.1:7890
# HTTPS_PROXY=http://127.0.0.1:7890

# 代理绕过列表
# NO_PROXY=localhost,127.0.0.1,::1

# =============================================================================
# 5. 日志与调试 (Logging & Debugging)
# =============================================================================

# 服务器日志级别
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
SERVER_LOG_LEVEL=INFO

# 打印重定向
# 设置为 true 将 server.py 的所有 print 输出重定向到日志文件。
# 生产环境建议开启，调试时建议关闭以在控制台查看实时输出。
SERVER_REDIRECT_PRINT=false

# 扩展日志开关
# 启用详细的调试日志 (可能会包含敏感信息)
DEBUG_LOGS_ENABLED=false
# 启用极详细的追踪日志 (会产生大量日志)
TRACE_LOGS_ENABLED=false

# JSON 结构化日志 (Structured JSON Logging)
# 设置为 true 以输出 JSON 格式日志，适用于 ELK/Datadog 等日志聚合工具。
# Default: false
JSON_LOGS=false

# 日志文件轮换配置 (Log Rotation Configuration)
# 单个日志文件最大字节数 (默认 10MB)
LOG_FILE_MAX_BYTES=10485760
# 保留的日志备份文件数量 (默认 5 个)
LOG_FILE_BACKUP_COUNT=5

# =============================================================================
# 6. API 默认参数 (API Defaults)
# =============================================================================
# 当 API 请求未明确指定参数时使用的默认值。

# 采样温度 (越高越随机)
DEFAULT_TEMPERATURE=1.0
# 最大输出 Token 数
DEFAULT_MAX_OUTPUT_TOKENS=65536
# Top-P 采样 (核采样)
DEFAULT_TOP_P=0.95
# 停止序列 (JSON 数组格式)
DEFAULT_STOP_SEQUENCES=["用户:"]

# 思考模型配置 (Thinking Models)
# 适用于 gemini-2.0-flash-thinking 等支持思考过程的模型

# 是否默认启用 "Thinking Budget"
ENABLE_THINKING_BUDGET=false

# 默认思考预算 (Token count)
DEFAULT_THINKING_BUDGET=8192

# 默认思考等级 (Thinking Level)
# Gemini 3 Pro 默认等级 (Options: high, low)
DEFAULT_THINKING_LEVEL_PRO=high
# Gemini 3 Flash 默认等级 (Options: high, medium, low, minimal)
DEFAULT_THINKING_LEVEL_FLASH=high

# 工具配置
# 是否默认启用 Google Search
ENABLE_GOOGLE_SEARCH=false
# 是否默认启用 URL Context 分析
ENABLE_URL_CONTEXT=false

# =============================================================================
# 7. 高级超时配置 (Advanced Timeouts)
# =============================================================================
# 单位均为毫秒 (ms)，除非另有说明。仅供高级调优，一般无需修改。

# 响应总超时 (5分钟)
RESPONSE_COMPLETION_TIMEOUT=300000

# 轮询间隔
POLLING_INTERVAL=300
POLLING_INTERVAL_STREAM=180

# 静默超时 (60秒无响应则断开)
SILENCE_TIMEOUT_MS=60000

# 页面交互超时
CLICK_TIMEOUT_MS=3000
WAIT_FOR_ELEMENT_TIMEOUT_MS=10000

# =============================================================================
# 8. 其他系统配置 (Misc System Config)
# =============================================================================

# 流式代理服务端口 (Stream Proxy)
# 用于处理流式响应的内部代理服务。设置为 0 可禁用（不推荐）。
STREAM_PORT=3120

# 脚本注入 (Userscript Injection)
# 允许加载自定义 JavaScript 以扩展页面功能（如加载额外模型列表）。
ENABLE_SCRIPT_INJECTION=false
USERSCRIPT_PATH=browser_utils/more_models.js

# Camoufox WebSocket 捕获超时 (秒)
ENDPOINT_CAPTURE_TIMEOUT=45

# 模型配置
MODEL_NAME=AI-Studio_Proxy_API
CHAT_COMPLETION_ID_PREFIX=chatcmpl-
AI_STUDIO_URL_PATTERN=aistudio.google.com/

# 排除模型列表文件 (相对于项目根目录)
# 此文件中列出的模型将不会在 /v1/models 端点中返回
EXCLUDED_MODELS_FILENAME=excluded_models.txt

# =============================================================================
# 9. 前端构建配置 (Frontend Build Configuration)
# =============================================================================

# 跳过前端构建检查 (Skip Frontend Build)
# 设置为 true 可跳过启动时的前端构建检查。
# 适用于没有 Node.js/npm 的环境，或使用预构建资源。
# 也可以通过命令行参数 --skip-frontend-build 来设置。
# Options: true, false, 1, 0, yes, no
SKIP_FRONTEND_BUILD=false